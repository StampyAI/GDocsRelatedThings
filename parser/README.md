# How to use this

1. Go to https://script.google.com and make a new project
2. Add the "Docs API" service from the Services tab on the left sidebar
3. Recreate the three files in this directory in the editor
4. Put your Coda API token in utils.gs on line 2 - you can generate one at https://coda.io/account -> API Settings
5. Run `parseAllAnswerDocs` in `main.gs`
6. That's it

## High-level execution overview

1. Load all questions from Coda
2. For each question
   1. Load the relevant Google Doc
   2. Split the Doc into content and related answer links
   3. Extract the google Doc ID for related answers, if there are any
   4. For each related Doc ID:
      1. Look up the name of the answer in Coda that corresponds to the Doc ID
   5. Check if the rest of the Doc content is just a LW / EAF link
      1. If so, get the markdown representation of the relevant link and return it
      2. If not:
         1. Split the Doc content into paragraphs
         2. For each paragraph
            1. Split the paragraph into elements
            2. For each element:
               1. Run a relevant element parser on the element
               2. If the element contains any suggestions:
                  1. Store the suggestion ID so we can count the total number of suggestions in the doc
                  2. Store the length of the markdown generated by the suggestion
            3. Join all the markdown strings for the elements into one paragraph
         3. Join all the markdown strings for the paragraphs, injecting new lines between them
   6. Search the document for footnotes
   7. For each footnote:
      1. Add the relevant markdown to the bottom of the doc, using the paragraph parser mentioned in 2.v.b.b
   8. Return all of:
      - The markdown generated in 2.v.5
      - The related answer names generated in 2.iv.a
      - The count and total size of all suggestions generated in 2.v.b.b.b.b
3. Shove all this new data into the row in Coda
4. TODO: Send an update on the suggestion count / size to Discord
